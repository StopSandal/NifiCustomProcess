# NiFi Custom Processor Project

## Инструкция на русском

Этот репозиторий предоставляет шаблон для создания пользовательских процессоров Apache NiFi с использованием Java и Maven. Проект включает необходимые настройки для создания NAR (NiFi Archive) файла, который можно развернуть в экземпляре NiFi.

### 1. Как клонировать проект

Для начала склонируйте репозиторий на локальную машину:

`git clone https://github.com/StopSandal/NifiCustomProcess`

### 2. Настройка целевой версии JDK

Убедитесь, что целевая версия JDK соответствует требованиям экземпляра NiFi. NiFi обычно работает с Java 11, но вы можете изменить это в файле `pom.xml`.

В файле `pom.xml` найдите секцию `<properties>` и установите правильную версию Java:

```xml
<properties>
    <maven.compiler.source>11</maven.compiler.source>
    <maven.compiler.target>11</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>
```

Если вы используете контейнер Docker для NiFi, вы можете указать версию Java при сборке образа или обновлении конфигурации Docker.

### 3. Как собрать NAR файл
Для сборки проекта и создания NAR файла выполните следующую команду Maven:

```bash
mvn nifi-nar:nar -f pom.xml
```

Эта команда скомпилирует проект и создаст NAR файл в папке target.

Или перейдите в Maven -> plugins -> nifi-nar -> nar и дважды щелкните.

### 4. Добавление NAR файла в Docker контейнер NiFi
Следуйте этим шагам, чтобы добавить пользовательский процессор в экземпляр NiFi, запущенный в Docker-контейнере:

1. Создайте на вашем устройстве папку с именем extensions.

2. Скопируйте скомпилированный NAR файл в папку extensions.

3. Доступ к контейнеру NiFi и переход к правильной директории.

4. В контейнере найдите папку 'nifi-current', расположенную по пути /opt/nifi/nifi-current.

5. Замените существующую папку вашей новой папкой extensions, скопировав вашу папку в nifi-current.

6. Нажмите на папку 'nifi-current', затем щелкните правой кнопкой мыши (RMB), в контекстном меню выберите import и выберите ранее созданную папку extensions.

7. Затем перезапустите NiFi или контейнер.
